{"version":3,"file":"navbar-hover-dropdown.js","sources":["../src/navbar-hover-dropdown.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Arizona Bootstrap: navbar-hover-dropdown.js\n * Licensed under MIT (https://github.com/az-digital/arizona-bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Dropdown from '../../node_modules/bootstrap/js/src/dropdown.js'\nimport EventHandler from '../../node_modules/bootstrap/js/src/dom/event-handler.js'\n\nconst HOVER_MEDIA_QUERY = '(hover: hover) and (pointer: fine)'\nconst HIDE_DELAY_MS = 300\n\nconst supportsPointerHover = () => typeof window !== 'undefined' && window.matchMedia?.(HOVER_MEDIA_QUERY)?.matches === true\n\nfunction getPrimaryDropdownTrigger(dropdownElement) {\n  const splitToggle = dropdownElement.querySelector(':scope > .dropdown-toggle.dropdown-toggle-split')\n  if (splitToggle instanceof HTMLElement) {\n    return splitToggle\n  }\n\n  const toggle = dropdownElement.querySelector(':scope > .dropdown-toggle')\n  if (toggle instanceof HTMLElement) {\n    return toggle\n  }\n\n  return null\n}\n\nfunction closeOtherDropdowns(navbar, currentDropdownElement) {\n  const openDropdowns = navbar.querySelectorAll('.navbar-nav > .nav-item.dropdown.show')\n  for (const openDropdown of openDropdowns) {\n    if (openDropdown === currentDropdownElement) {\n      continue\n    }\n\n    if (!(openDropdown instanceof HTMLElement)) {\n      continue\n    }\n\n    const trigger = getPrimaryDropdownTrigger(openDropdown)\n    if (!trigger) {\n      continue\n    }\n\n    const instance = Dropdown.getInstance(trigger)\n    instance?.hide()\n  }\n}\n\nclass NavbarHoverDropdown extends Dropdown {\n  constructor(element, dropdownElement, navbar, config) {\n    super(element, config)\n\n    this._dropdownElement = dropdownElement\n    this._navbar = navbar\n    this._hideTimer = null\n    this._shouldCloseSiblings = dropdownElement.matches('.navbar-nav > .nav-item.dropdown')\n    this._hoverTriggered = false\n    this._suppressNextBlur = false\n\n    if (supportsPointerHover()) {\n      this._addHoverListeners()\n    }\n  }\n\n  dispose() {\n    this._removeHoverListeners()\n    super.dispose()\n  }\n\n  _addHoverListeners() {\n    if (!this._dropdownElement) {\n      return\n    }\n\n    this._boundOnEnter = () => this._handleHoverEnter()\n    this._boundOnLeave = () => this._handleHoverLeave()\n    this._boundMenuEnter = () => this._cancelScheduledHide()\n    this._boundMenuLeave = () => this._handleHoverLeave()\n    this._boundOnFocus = event => this._handleFocus(event)\n    this._boundOnBlur = event => this._handleBlur(event)\n\n    EventHandler.on(this._element, 'mouseenter', this._boundOnEnter)\n    EventHandler.on(this._element, 'mouseleave', this._boundOnLeave)\n    EventHandler.on(this._element, 'focus', this._boundOnFocus)\n    EventHandler.on(this._element, 'blur', this._boundOnBlur)\n    EventHandler.on(this._dropdownElement, 'mouseleave', this._boundOnLeave)\n\n    if (this._menu) {\n      EventHandler.on(this._menu, 'mouseenter', this._boundMenuEnter)\n      EventHandler.on(this._menu, 'mouseleave', this._boundMenuLeave)\n    }\n  }\n\n  _removeHoverListeners() {\n    if (!this._dropdownElement || !supportsPointerHover()) {\n      return\n    }\n\n    EventHandler.off(this._element, 'mouseenter', this._boundOnEnter)\n    EventHandler.off(this._element, 'mouseleave', this._boundOnLeave)\n    EventHandler.off(this._element, 'focus', this._boundOnFocus)\n    EventHandler.off(this._element, 'blur', this._boundOnBlur)\n    EventHandler.off(this._dropdownElement, 'mouseleave', this._boundOnLeave)\n\n    if (this._menu) {\n      EventHandler.off(this._menu, 'mouseenter', this._boundMenuEnter)\n      EventHandler.off(this._menu, 'mouseleave', this._boundMenuLeave)\n    }\n  }\n\n  _handleHoverEnter() {\n    this._cancelScheduledHide()\n    this._hoverTriggered = true\n\n    if (this._shouldCloseSiblings && this._navbar && this._dropdownElement) {\n      closeOtherDropdowns(this._navbar, this._dropdownElement)\n    }\n\n    this.show()\n    this._removePointerFocus()\n  }\n\n  _handleHoverLeave() {\n    this._scheduleHide()\n  }\n\n  _handleFocus(event) {\n    if (event.relatedTarget && this._menu?.contains(event.relatedTarget)) {\n      return\n    }\n\n    this._cancelScheduledHide()\n    this.show()\n  }\n\n  _handleBlur(event) {\n    if (this._suppressNextBlur) {\n      this._suppressNextBlur = false\n      return\n    }\n\n    if (event.relatedTarget && this._menu?.contains(event.relatedTarget)) {\n      return\n    }\n\n    this._scheduleHide()\n  }\n\n  _scheduleHide() {\n    this._cancelScheduledHide()\n    this._hideTimer = window.setTimeout(() => {\n      this.hide()\n    }, HIDE_DELAY_MS)\n  }\n\n  _cancelScheduledHide() {\n    if (this._hideTimer) {\n      window.clearTimeout(this._hideTimer)\n      this._hideTimer = null\n    }\n  }\n\n  _removePointerFocus() {\n    if (!this._hoverTriggered) {\n      return\n    }\n\n    if (document.activeElement === this._element) {\n      this._suppressNextBlur = true\n      this._element.blur()\n    }\n\n    this._hoverTriggered = false\n  }\n}\n\nfunction enableAzNavbarHoverDropdowns() {\n  if (typeof document === 'undefined' || typeof window === 'undefined') {\n    return\n  }\n\n  const navbars = document.querySelectorAll('.navbar-az')\n  if (!navbars.length) {\n    return\n  }\n\n  if (!supportsPointerHover()) {\n    return\n  }\n\n  for (const navbar of navbars) {\n    EventHandler.on(navbar, 'mouseleave', () => {\n      const openTriggers = navbar.querySelectorAll('.dropdown-toggle.show')\n\n      for (const trigger of openTriggers) {\n        Dropdown.getInstance(trigger)?.hide()\n      }\n    })\n\n    const dropdowns = navbar.querySelectorAll('.navbar-nav > .nav-item.dropdown')\n\n    for (const dropdownElement of dropdowns) {\n      if (!(dropdownElement instanceof HTMLElement)) {\n        continue\n      }\n\n      const triggerElement = getPrimaryDropdownTrigger(dropdownElement)\n      if (!triggerElement) {\n        continue\n      }\n\n      const existingInstance = Dropdown.getInstance(triggerElement)\n      if (existingInstance && !(existingInstance instanceof NavbarHoverDropdown)) {\n        existingInstance.dispose()\n      }\n\n      if (existingInstance instanceof NavbarHoverDropdown) {\n        continue\n      }\n\n      createNavbarHoverDropdown(triggerElement, dropdownElement, navbar)\n    }\n  }\n}\n\nfunction createNavbarHoverDropdown(triggerElement, dropdownElement, navbar) {\n  return new NavbarHoverDropdown(triggerElement, dropdownElement, navbar)\n}\n\nexport { enableAzNavbarHoverDropdowns as default }\n"],"names":["HOVER_MEDIA_QUERY","HIDE_DELAY_MS","supportsPointerHover","_window$matchMedia","window","matchMedia","matches","getPrimaryDropdownTrigger","dropdownElement","splitToggle","querySelector","HTMLElement","toggle","closeOtherDropdowns","navbar","currentDropdownElement","openDropdowns","querySelectorAll","_iterator","_createForOfIteratorHelperLoose","_step","done","openDropdown","value","trigger","instance","Dropdown","getInstance","hide","NavbarHoverDropdown","_Dropdown","element","config","_this","call","_dropdownElement","_navbar","_hideTimer","_shouldCloseSiblings","_hoverTriggered","_suppressNextBlur","_addHoverListeners","_inheritsLoose","_proto","prototype","dispose","_removeHoverListeners","_this2","_boundOnEnter","_handleHoverEnter","_boundOnLeave","_handleHoverLeave","_boundMenuEnter","_cancelScheduledHide","_boundMenuLeave","_boundOnFocus","event","_handleFocus","_boundOnBlur","_handleBlur","EventHandler","on","_element","_menu","off","show","_removePointerFocus","_scheduleHide","_this$_menu","relatedTarget","contains","_this$_menu2","_this3","setTimeout","clearTimeout","document","activeElement","blur","enableAzNavbarHoverDropdowns","navbars","length","_loop","_step2","openTriggers","_iterator3","_step3","_Dropdown$getInstance","dropdowns","_iterator4","_step4","triggerElement","existingInstance","createNavbarHoverDropdown","_iterator2"],"mappings":"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"}